<script type="text/x-handlebars" data-template-name="stonehearthFarm">
   <div id="farmWindow" class="gui">
      <div class="window">
         <div class="title">
            {{ view.unit_name }}<div class="closeButton"></div>
         </div>

         <h2>{{i18n stonehearth:ui.game.zones_mode.farm.choose_crop}}:</h2>

         <div id="cropRotation">
            <table id="cropPanel">
               <tr><td>
                  <a id="addCropLink" {{action "addCropButtonClicked" target="view"}}>
                     <div class="targetCrop downSection">
                        <img class="cropImage tooltip" {{bind-attr src="view.model.stonehearth:farmer_field.current_crop_details.icon" title="view.model.stonehearth:farmer_field.current_crop_details.name"}} />
                     </div>
                  </a>
               </td><td>
                  <div id="cropDescription" class="description">
                     <div class="name">{{i18n_key view.model.stonehearth:farmer_field.current_crop_details.name}}</div>
                     <p>{{i18n_key view.model.stonehearth:farmer_field.current_crop_details.description}}</p>
                  </div>
               </td></tr>         
            </table>

            <div id="cropDetails" {{bind-attr class="view.isFallow:hidden"}}>
               <div id="cropProperties">
                  <h2>{{i18n stonehearth_ace:ui.game.zones_mode.farm.properties}}</h2>
                  <table id="cropPropertiesTable">
                     <tr id="cropPropertiesRow">
                        <td>
                           <div id="growthTime" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropProperties.growthTime.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showWater::hidden}}>
                           <div id="waterAffinity" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropProperties.waterAffinity.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showWater::hidden}}>
                           <div id="floodPreference" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropProperties.floodPreference.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showLight::hidden}}>
                           <div id="lightAffinity" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropProperties.lightAffinity.icon"}}/>
                           </div>
                        </td>
                        <td id="preferredSeasons"></td>
                     </tr>
                  </table>
               </div>

               <div id="cropStatuses">
                  <h2>{{i18n stonehearth_ace:ui.game.zones_mode.farm.statuses}}</h2>
                  <table id="cropStatusesTable">
                     <tr id="cropStatusesRow">
                        <td>
                           <div id="relativeGrowthTime" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropStatuses.relativeGrowthTime.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showWater::hidden}}>
                           <div id="currentWaterLevel" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropStatuses.currentWaterLevel.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showWater::hidden}}>
                           <div id="currentFlooded" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropStatuses.currentFlooded.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showLight::hidden}}>
                           <div id="currentLightLevel" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropStatuses.currentLightLevel.icon"}}/>
                           </div>
                        </td>
                        <td {{bind-attr class=view.showFertilizer::hidden}}>
                           <div id="currentFertilized" class="cropProperty">
                              <img class="cropPropertyImage" {{bind-attr src="view.cropStatuses.currentFertilized.icon"}}/>
                           </div>
                        </td>
                     </tr>
                  </table>
               </div>

               <div id="fertilizerSettings" {{bind-attr class=view.showFertilizer::hidden}}>
                  <h2>{{i18n stonehearth_ace:ui.game.zones_mode.farm.fertilizer_settings.title}}</h2>
                  <div>
                     <div id="fertilizerNone" class="fertilizerSetting">
                        <input id="fertilizerNoneButton" type="radio" name="fertilizer" value="none" class="fertilizerRadioButton">
                        <label for="fertilizer" class="label" clicksound="stonehearth:sounds:ui:carpenter_menu:add_remove">{{i18n stonehearth_ace:ui.game.zones_mode.farm.fertilizer_settings.none}}</label>
                     </div>
                     <div id="fertilizerLow" class="fertilizerSetting">
                        <input id="fertilizerLowButton" type="radio" name="fertilizer" value="low" class="fertilizerRadioButton">
                        <label for="fertilizer" class="label" clicksound="stonehearth:sounds:ui:carpenter_menu:add_remove">{{i18n stonehearth_ace:ui.game.zones_mode.farm.fertilizer_settings.low_quality}}</label>
                     </div>
                     <div id="fertilizerHigh" class="fertilizerSetting">
                        <input id="fertilizerHighButton" type="radio" name="fertilizer" value="high" class="fertilizerRadioButton">
                        <label for="fertilizer" class="label" clicksound="stonehearth:sounds:ui:carpenter_menu:add_remove">{{i18n stonehearth_ace:ui.game.zones_mode.farm.fertilizer_settings.high_quality}}</label>
                     </div>
                  </div>
                  <div class="label" style="text-align: center;">{{i18n stonehearth_ace:ui.game.zones_mode.farm.fertilizer_settings.specific}}</div>
                  <div id="fertilizerPaletteContainer" class="downSection">
                     <div id="fertilizerPalette"></div>
                  </div>
               </div>
            </div>
         </div>

         <div id="enableHarvest" {{bind-attr class=view.allowDisableHarvest:setting:hidden}}>
            <input id="enableHarvestCheckbox" type="checkbox" value="enableHarvest">
            <label for="enableHarvestCheckbox">{{i18n stonehearth_ace:ui.game.zones_mode.farm.enable_harvest}}</label>
         </div>
         
         <div id="enablePlanting" {{bind-attr class=view.allowDisablePlanting:setting:hidden}}>
            <input id="enablePlantingCheckbox" type="checkbox" value="enablePlanting">
            <label for="enablePlantingCheckbox">{{i18n stonehearth_ace:ui.game.zones_mode.farm.pause_planting}}</label>
         </div>
         <p></p>

         <button class="warn">{{i18n stonehearth:ui.game.common.remove}}</button>
         <button class="ok okButton"></button>

      </div>
   </div>
</script>

<script type="text/x-handlebars" data-template-name="stonehearthCropPalette">
   <div id="cropPalette" class="gui">
      <div class="window">
         <div class="title">{{i18n stonehearth:ui.game.zones_mode.farm.choose_crop}}</div>

         <div class="list downSection">
            <table>
               <tbody>
               {{#each view.crops}}
                  <tr {{bind-attr crop=crop_type locked=is_locked class="row this.is_locked:disabled this.is_locked:is-locked this.is_hidden:is-hidden"}}>
                     <td>
                        <div class="icon">
                           <img class="image" {{bind-attr src=crop_info.icon}} />
                        </div>
                     </td>
                     <td>
                        <div class="info">
                           <div class="name">{{i18n_key crop_info.name}}</div>
                           {{#if this.is_locked}}
                              <div class="description">
                                 {{i18n stonehearth:ui.game.show_workshop.level_requirement_needed}}
                                 {{i18n stonehearth:jobs.farmer.farmer_description.display_name}}
                                 {{i18n stonehearth:ui.game.show_workshop.level_requirement_level}}
                                 {{this.crop_level_requirement}}
                              </div>
                           {{else}}
                              <div class="description">
                                 {{i18n_key crop_info.description}}
                                 {{#if crop_info.preferred_seasons}}
                                    <p class="preferredSeasons">
                                       <span class="label">{{i18n stonehearth:ui.game.zones_mode.farm.preferred_seasons}}</span>
                                       {{crop_info.preferred_seasons}}
                                    </p>
                                 {{/if}}
                              </div>
                           {{/if}}
                        </div>
                     </td>
                  </tr>
               {{/each}}
               </tbody>
            </table>
         </div>
      </div>
   </div>
</script>
